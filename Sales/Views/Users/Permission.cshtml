@model ModelPermission
@{
	ViewData["Page"] = "صلاحيات المستخدمين";
}
@section CSS
	{
	<!--begin::Vendor Stylesheets(used for this page only)-->
	<link href="/assets/plugins/custom/datatables/datatables.bundle.rtl.css" rel="stylesheet" type="text/css" />
	<!--end::Vendor Stylesheets-->
}
<!--begin::Content wrapper-->
<div class="d-flex flex-column flex-column-fluid">
	<!--begin::Content-->
	<div id="kt_app_content" class="app-content flex-column-fluid">
		<!--begin::Content container-->
		<div id="kt_app_content_container" class="app-container container-fluid">
			@if (ViewBag.Type == "error")
			{
				<!--begin::Alert-->
				<div class="alert alert-dismissible bg-light-danger border border-danger border-dashed d-flex flex-column flex-sm-row w-100 p-5 mb-10">
					<!--begin::Icon-->
					<!--begin::Svg Icon | path: icons/duotune/communication/com003.svg-->
					<span class="svg-icon svg-icon-2hx svg-icon-danger me-4 mb-5 mb-sm-0">
						<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path opacity="0.3" d="M2 4V16C2 16.6 2.4 17 3 17H13L16.6 20.6C17.1 21.1 18 20.8 18 20V17H21C21.6 17 22 16.6 22 16V4C22 3.4 21.6 3 21 3H3C2.4 3 2 3.4 2 4Z" fill="currentColor" />
							<path d="M18 9H6C5.4 9 5 8.6 5 8C5 7.4 5.4 7 6 7H18C18.6 7 19 7.4 19 8C19 8.6 18.6 9 18 9ZM16 12C16 11.4 15.6 11 15 11H6C5.4 11 5 11.4 5 12C5 12.6 5.4 13 6 13H15C15.6 13 16 12.6 16 12Z" fill="currentColor" />
						</svg>
					</span>
					<!--end::Svg Icon-->
					<!--end::Icon-->
					<!--begin::Content-->
					<div class="d-flex flex-column pe-0 pe-sm-10">
						<h5 class="mb-1">خطأ !</h5>
						<span>@ViewBag.Message</span>
					</div>
					<!--end::Content-->
					<!--begin::Close-->
					<button type="button" class="position-absolute position-sm-relative m-2 m-sm-0 top-0 end-0 btn btn-icon ms-sm-auto" data-bs-dismiss="alert">
						<i class="bi bi-x fs-1 text-danger"></i>
					</button>
					<!--end::Close-->
				</div>
				<!--end::Alert-->
			}
			else
			{
				<!--begin::Card-->
				<div class="card">
					<form id="kt_form" class="form" asp-controller="Users" asp-action="Permission" onsubmit="return CreatePost()" method="post">
						<input asp-for="@Model.UserID" hidden />
						<!--begin::Card header-->
						<div class="card-header ribbon ribbon-start ribbon-clip border-0">
							<!--begin::Card title-->
							<div class="ribbon-label fs-4">
								صلاحيات مستخدم : @Model.FullName
								<span class="ribbon-inner bg-info"></span>
							</div>
							<div class="card-title">
								<div class="d-flex align-items-center position-relative my-1"></div>
							</div>
							<!--end::Card title-->
						</div>
						<!--end::Card header-->
						<!--begin::Card header-->
						<div class="card-header border-0 pt-6">
							<!--begin::Card title-->
							<div class="card-title">
								<!--begin::Search-->
								<div class="d-flex align-items-center position-relative my-1">
									<!--begin::Svg Icon | path: icons/duotune/general/gen021.svg-->
									<span class="svg-icon svg-icon-1 position-absolute ms-6">
										<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
											<rect opacity="0.5" x="17.0365" y="15.1223" width="8.15546" height="2" rx="1" transform="rotate(45 17.0365 15.1223)" fill="currentColor" />
											<path d="M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z" fill="currentColor" />
										</svg>
									</span>
									<!--end::Svg Icon-->
									<input type="text" data-kt-user-table-filter="search" class="form-control form-control-solid w-250px ps-14" placeholder="أكتب هنا للبحث ..." />
								</div>
								<!--end::Search-->
							</div>
							<!--end::Card title-->
						</div>
						<!--end::Card header-->
						<!--begin::Card body-->
						<div class="card-body py-4">
							<!--begin::Card body-->
							<div class="card-body py-4">
								<!--begin::Table-->
								<table class="table align-middle table-striped fs-6 fw-bold" id="kt_table">
									<!--begin::Table head-->
									<thead>
										<!--begin::Table row-->
										<tr class="text-start fw-bold fs-7 gs-0">
											<th class="text-center min-w-50px">م</th>
											<th class="text-center min-w-125px">الصلاحيات</th>
											<th class="text-center min-w-50px">عرض</th>
											<th class="text-center min-w-50px">إضافة</th>
											<th class="text-center min-w-50px">تعديل</th>
											<th class="text-center min-w-50px">حذف</th>
										</tr>
										<!--end::Table row-->
									</thead>
									<!--end::Table head-->
									<tbody>
										@for (int i = 0; i < Model.Claims.Count; i += 5)
										{
											<tr>
												<td></td>
												<td>
													<input asp-for="@Model.Claims[i].ClaimType" hidden />
													@Model.Claims[i].ClaimType
												</td>
												<td>
													<input asp-for="@Model.Claims[i + 1].ClaimType" hidden />
													@if (@Model.Claims[i + 1].ClaimValue != "0")
													{
														<div class="form-check form-switch form-check-custom form-check-success form-check-solid">
															<input class="form-check-input" data-switch="true" type="checkbox" asp-for="@Model.Claims[i + 1].IsSelected" />
														</div>
													}
												</td>
												<td>
													<input asp-for="@Model.Claims[i + 2].ClaimType" hidden />
													@if (@Model.Claims[i + 2].ClaimValue != "0")
													{
														<div class="form-check form-switch form-check-custom form-check-success form-check-solid">
															<input class="form-check-input" data-switch="true" type="checkbox" asp-for="@Model.Claims[i + 2].IsSelected" />
														</div>
													}
												</td>
												<td>
													<input asp-for="@Model.Claims[i + 3].ClaimType" hidden />
													@if (@Model.Claims[i + 3].ClaimValue != "0")
													{
														<div class="form-check form-switch form-check-custom form-check-success form-check-solid">
															<input class="form-check-input" data-switch="true" type="checkbox" asp-for="@Model.Claims[i + 3].IsSelected" />
														</div>
													}
												</td>
												<td>
													<input asp-for="@Model.Claims[i + 4].ClaimType" hidden />
													@if (@Model.Claims[i + 4].ClaimValue != "0")
													{
														<div class="form-check form-switch form-check-custom form-check-success form-check-solid">
															<input class="form-check-input" data-switch="true" type="checkbox" asp-for="@Model.Claims[i + 4].IsSelected" />
														</div>
													}
												</td>
											</tr>
										}
									</tbody>
								</table>
								<!--end::Table-->
							</div>
							<!--end::Card body-->
						</div>
						<!--end::Card body-->
						<div class="card-footer row text-center">
							<div class="col-xl-4">
								<button type="submit" class="btn btn-primary btn-lg w-50" data-kt-action="submit">
									<span class="indicator-label">حفظ التعديل</span>
									<span class="indicator-progress">
										إنتظر ...
										<span class="spinner-border spinner-border-sm align-middle ms-2"></span>
									</span>
								</button>
							</div>
							<div class="col-xl-4">
								<button type="button" class="btn btn-success btn-lg text-dark w-50" data-kt-action="selectAll">
									تحديد الكل
								</button>
							</div>
							<div class="col-xl-4">
								<button type="button" class="btn btn-danger btn-lg text-dark w-50" data-kt-action="removeAll">
									الغاء الكل
								</button>
							</div>
						</div>
					</form>
				</div>
				<!--end::Card-->
			}
		</div>
		<!--end::Content container-->
	</div>
	<!--end::Content-->
</div>
<!--end::Content wrapper-->
@section Scripts
	{
	<!--begin::Vendors Javascript(used for this page only)-->
	<script src="/assets/plugins/custom/datatables/datatables.bundle.js"></script>
	<script src="/js/Users_Permission.js"></script>
	<!--end::Custom Javascript-->
}
